<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Anatolii Platonov"><meta name=description content="This trick is very useful if you are using TDD. From time to time there is a lot of duplication in our tests. For each test case only the input, the expected output, and name of test case change. Everything else is boilerplate. What wes&rsquo;d like to set up all the inputs and expected outputs and feel them to a single test harness.
func TestSomething(t *testing.T) { tests := []struct{ input interface{} expected interface{} name string }{ // Your test cases here } for _, tc := range tests { t."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tests driven tests in go"><meta name=twitter:description content="This trick is very useful if you are using TDD. From time to time there is a lot of duplication in our tests. For each test case only the input, the expected output, and name of test case change. Everything else is boilerplate. What wes&rsquo;d like to set up all the inputs and expected outputs and feel them to a single test harness.
func TestSomething(t *testing.T) { tests := []struct{ input interface{} expected interface{} name string }{ // Your test cases here } for _, tc := range tests { t."><meta property="og:title" content="Tests driven tests in go"><meta property="og:description" content="This trick is very useful if you are using TDD. From time to time there is a lot of duplication in our tests. For each test case only the input, the expected output, and name of test case change. Everything else is boilerplate. What wes&rsquo;d like to set up all the inputs and expected outputs and feel them to a single test harness.
func TestSomething(t *testing.T) { tests := []struct{ input interface{} expected interface{} name string }{ // Your test cases here } for _, tc := range tests { t."><meta property="og:type" content="article"><meta property="og:url" content="http://platonoff-dev.com/test_driven_tests/"><meta property="article:section" content="til"><meta property="article:published_time" content="2022-02-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-05T00:00:00+00:00"><title>Tests driven tests in go Â· Anatolii Platonov</title><link rel=canonical href=http://platonoff-dev.com/test_driven_tests/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.eb7743f94930acfd17146aecc1f80e86fe35b3e451f2ec0c98485f9c4d962f34.css integrity="sha256-63dD+UkwrP0XFGrswfgOhv41s+RR8uwMmEhfnE2WLzQ=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.dde8a61eb31a32353b4baf3d9113f03c4ea2a8ca9bb736f59ca2d2b2cb664f0b.css integrity="sha256-3eimHrMaMjU7S689kRPwPE6iqMqbtzb1nKLSsstmTws=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/static/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/static/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto" onload=twemoji.parse(document.body)><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Anatolii Platonov</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/til/>TIL</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=http://platonoff-dev.com/test_driven_tests/>Tests driven tests in go</a></h1></header><p>This trick is very useful if you are using TDD.
From time to time there is a lot of duplication in our tests. For each test case only the input, the expected output, and name of test case change. Everything else is boilerplate. What wes&rsquo;d like to set up all the inputs and expected outputs and feel them to a single test harness.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=font-weight:700>func</span> TestSomething(t *testing.T) {
</span></span><span style=display:flex><span>	tests := []<span style=font-weight:700>struct</span>{
</span></span><span style=display:flex><span>		input <span style=font-weight:700>interface</span>{}
</span></span><span style=display:flex><span>		expected <span style=font-weight:700>interface</span>{}
</span></span><span style=display:flex><span>		name <span>string</span>
</span></span><span style=display:flex><span>	}{
</span></span><span style=display:flex><span>		<span style=font-style:italic>// Your test cases here
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>	}
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, tc := <span style=font-weight:700>range</span> tests {
</span></span><span style=display:flex><span>		t.Run(tc.name, <span style=font-weight:700>func</span>(t *testing.T) {
</span></span><span style=display:flex><span>			<span style=font-style:italic>// Your test logic here
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>		})
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Also this tests can be ran in parallel:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=font-weight:700>func</span> TestSomething(t *testing.T) {
</span></span><span style=display:flex><span>	t.Parallel()
</span></span><span style=display:flex><span>	tests := []<span style=font-weight:700>struct</span>{
</span></span><span style=display:flex><span>		input <span style=font-weight:700>interface</span>{}
</span></span><span style=display:flex><span>		expected <span style=font-weight:700>interface</span>{}
</span></span><span style=display:flex><span>		name <span>string</span>
</span></span><span style=display:flex><span>	}{
</span></span><span style=display:flex><span>		<span style=font-style:italic>// Your test cases here
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>	}
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, tc := <span style=font-weight:700>range</span> tests {
</span></span><span style=display:flex><span>		t.Run(tc.name, <span style=font-weight:700>func</span>(t *testing.T) {
</span></span><span style=display:flex><span>			<span style=font-style:italic>// Your test logic here
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>		})
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></article></section></div></main><script src=/js/coder.min.978ac2219b08e24e68c3f3eada8d99add50d9d997ce3861354b602cc94f75f30.js integrity="sha256-l4rCIZsI4k5ow/Pq2o2ZrdUNnZl844YTVLYCzJT3XzA="></script></body></html>